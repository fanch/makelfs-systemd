# Description: Syst√®me de messages pour les bus
# URL: http://dbus.freedesktop.org
# Maintainer: cgit.freedesktop.org/dbus/dbus
# Packager: thierryn1 at hispeed dot ch
# Depends on: expat, xorg-libx11, xorg-libsm, xorg-libice
# Run on: expat,xorg-libx11,xorg-libsm,xorg-libice

source=(http://dbus.freedesktop.org/releases/dbus/$name-$version.tar.gz \
       system-local.conf)

build() {
	cd $name-$version
	./configure --prefix=/usr \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --libexecdir=/usr/lib/dbus-1.0 \
            --disable-static \
            --enable-systemd \
            --docdir=/usr/share/doc/dbus-1.6.18 \
            --with-console-auth-dir=/run/console/ \
            --with-systemdsystemunitdir=/lib/systemd/system
	make
	make DESTDIR=$PKG install
mkdir -p $PKG/lib
mv -v $PKG/usr/lib/libdbus-1.so.* $PKG/lib
ln -sfv ../../lib/$(readlink /usr/lib/libdbus-1.so) $PKG/usr/lib/libdbus-1.so
mkdir -p $PKG/var/lib	
ln -s /etc/machine-id $PKG/var/lib/dbus
}
