# Description: The Binutils package contains a linker, an assembler, and other tools for handling object files
# URL: http://sources.redhat.com/binutils/
# Maintainer: Tristan Gingold, Alan Modra, etc gingold at adacore dot com amodra at bigpond dot net dot au
# Packager: pierre

source=(http://ftp.gnu.org/gnu/binutils/binutils-$version.tar.bz2)
build()
{
cd binutils-$version

rm -fv etc/standards.info
sed -i.bak '/^INFO/s/standards.info //' etc/Makefile.in


mkdir -v ../binutils-build
cd ../binutils-build

# ../binutils-$version/configure \
#	--prefix=/usr \
#	--enable-shared

# make tooldir=/usr

../binutils-$version/configure \
--prefix=/ --includedir=/usr/include \
--datarootdir=/usr/share \
--enable-shared

make tooldir=/

make  LDFLAGS="" -k check || true

# make tooldir=/usr DESTDIR=$PKG install
make tooldir=/ DESTDIR=$PKG install

cp -v ../binutils-$version/include/libiberty.h $PKG/usr/include
rm -rf $PKG/usr/share/info/dir

}
